[gd_scene load_steps=21 format=4 uid="uid://dmrt6t2vmajwi"]

[ext_resource type="Script" uid="uid://drywyyj1nxdb3" path="res://scenes/main.gd" id="1_o5qli"]
[ext_resource type="Texture2D" uid="uid://co3vjucx0h4og" path="res://scenes/tilemap2.png" id="2_0wfyh"]
[ext_resource type="PackedScene" uid="uid://b3x524f6m4i62" path="res://surveyor.tscn" id="2_tbgi4"]
[ext_resource type="Texture2D" uid="uid://ccamo22oq2aty" path="res://station.png" id="4_jyhfs"]
[ext_resource type="Texture2D" uid="uid://dtrnfiyyelqab" path="res://scenes/fogofwar.png" id="5_tbgi4"]
[ext_resource type="Script" uid="uid://c4wn7f84g47w6" path="res://scenes/shadow_rail.gd" id="5_tipki"]
[ext_resource type="Shader" uid="uid://chjt1pt14yblo" path="res://scenes/rail.gdshader" id="6_choun"]
[ext_resource type="PackedScene" uid="uid://bhbchgqecjgxk" path="res://hud.tscn" id="6_tefeu"]
[ext_resource type="Script" uid="uid://bn8y2ks4mymdt" path="res://scenes/rail.gd" id="6_ya4ey"]
[ext_resource type="PackedScene" uid="uid://1k7r008g2o71" path="res://camera_parent.tscn" id="7_o6xl0"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_sugp2"]
texture = ExtResource("2_0wfyh")
texture_region_size = Vector2i(64, 64)
0:0/0 = 0
0:0/0/custom_data_0 = "water"
1:0/0 = 0
1:0/0/custom_data_0 = "grass"
0:1/0 = 0
0:1/0/custom_data_0 = "coast"
1:1/0 = 0
0:2/0 = 0
0:2/0/custom_data_0 = "mountain"

[sub_resource type="TileSet" id="TileSet_jyhfs"]
tile_size = Vector2i(64, 64)
custom_data_layer_0/name = "name"
custom_data_layer_0/type = 4
sources/0 = SubResource("TileSetAtlasSource_sugp2")

[sub_resource type="RectangleShape2D" id="RectangleShape2D_jyhfs"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_ya4ey"]
shader = ExtResource("6_choun")
shader_parameter/progress = 0.0

[sub_resource type="Gradient" id="Gradient_choun"]
colors = PackedColorArray(0, 0, 0, 1, 0.22001922, 0.74528974, 0, 1)

[sub_resource type="Gradient" id="Gradient_ya4ey"]
colors = PackedColorArray(0, 0, 0, 1, 0, 0, 1, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_eb6dy"]
gradient = SubResource("Gradient_ya4ey")

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_tefeu"]
texture = ExtResource("5_tbgi4")
texture_region_size = Vector2i(64, 64)
0:4/0 = 0
1:4/0 = 0
2:4/0 = 0
3:4/0 = 0
0:5/0 = 0
1:5/0 = 0
2:5/0 = 0
3:5/0 = 0
0:6/0 = 0
1:6/0 = 0
2:6/0 = 0
3:6/0 = 0
0:7/0 = 0
1:7/0 = 0
2:7/0 = 0
3:7/0 = 0
0:3/0 = 0
0:0/0 = 0
0:1/0 = 0
0:1/0/custom_data_0 = true

[sub_resource type="TileSet" id="TileSet_o6xl0"]
tile_size = Vector2i(64, 64)
custom_data_layer_0/name = "isFog"
custom_data_layer_0/type = 1
sources/0 = SubResource("TileSetAtlasSource_tefeu")

[sub_resource type="CircleShape2D" id="CircleShape2D_tbgi4"]

[node name="Main" type="Node"]
script = ExtResource("1_o5qli")
surveyor_scene = ExtResource("2_tbgi4")

[node name="TileMapLayer" type="TileMapLayer" parent="." groups=["MainMap"]]
tile_map_data = PackedByteArray("AAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAoAAAAAAAAAAAABAAkAAAAAAAAAAAABAAgAAAAAAAAAAAABAAcAAAAAAAAAAAABAAYAAAAAAAAAAAABAAIAAAAAAAAAAAABAAEAAAAAAAAAAAABAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAKAAEAAAAAAAAAAAAKAAIAAAAAAAAAAAAKAAMAAAAAAAAAAAAKAAQAAAAAAAAAAAAKAAUAAAAAAAAAAAAKAAYAAAAAAAAAAAAKAAcAAAAAAAAAAAAKAAgAAAAAAAAAAAAKAAkAAAAAAAAAAAAKAAoAAAAAAAAAAAAJAAAAAAAAAAAAAAAJAAEAAAAAAAAAAAAJAAIAAAAAAAAAAAAJAAMAAAAAAAAAAAAJAAQAAAAAAAAAAAAJAAUAAAAAAAAAAAALAAAAAAAAAAAAAAALAAEAAAAAAAAAAAALAAIAAAAAAAAAAAALAAMAAAAAAAAAAAALAAQAAAAAAAAAAAALAAUAAAAAAAAAAAALAAYAAAAAAAAAAAALAAcAAAAAAAAAAAALAAgAAAAAAAAAAAALAAkAAAAAAAAAAAALAAoAAAAAAAAAAAALAAsAAAAAAAAAAAAKAAsAAAAAAAAAAAAAAAsAAAAAAAAAAAABAAsAAAAAAAEAAAABAAoAAAAAAAEAAAACAAoAAAAAAAEAAAACAAkAAAAAAAEAAAACAAgAAAAAAAEAAAACAAcAAAAAAAEAAAACAAYAAAAAAAEAAAACAAUAAAAAAAEAAAABAAUAAAAAAAEAAAABAAQAAAAAAAEAAAABAAMAAAAAAAEAAAACAAMAAAAAAAEAAAACAAIAAAAAAAEAAAACAAEAAAAAAAEAAAACAAAAAAAAAAEAAAAIAAAAAAAAAAEAAAAIAAEAAAAAAAEAAAAIAAIAAAAAAAEAAAAIAAMAAAAAAAEAAAAIAAQAAAAAAAEAAAAIAAUAAAAAAAEAAAAIAAYAAAAAAAEAAAAJAAYAAAAAAAEAAAAJAAcAAAAAAAEAAAAJAAgAAAAAAAEAAAAJAAkAAAAAAAEAAAAJAAoAAAAAAAEAAAAJAAsAAAAAAAEAAAAIAAsAAAABAAAAAAAHAAsAAAABAAAAAAAGAAsAAAAAAAIAAAAFAAsAAAAAAAIAAAAEAAsAAAAAAAIAAAADAAsAAAABAAAAAAACAAsAAAABAAAAAAADAAoAAAABAAAAAAADAAkAAAABAAAAAAADAAgAAAABAAAAAAADAAcAAAABAAAAAAADAAYAAAABAAAAAAADAAUAAAABAAAAAAADAAQAAAABAAAAAAACAAQAAAABAAAAAAADAAIAAAABAAAAAAADAAMAAAABAAAAAAADAAEAAAABAAAAAAADAAAAAAABAAAAAAAEAAAAAAABAAAAAAAFAAAAAAAAAAIAAAAGAAAAAAAAAAIAAAAHAAAAAAABAAAAAAAHAAEAAAABAAAAAAAHAAIAAAAAAAIAAAAHAAMAAAAAAAIAAAAHAAQAAAAAAAIAAAAHAAUAAAAAAAIAAAAGAAUAAAAAAAIAAAAGAAYAAAAAAAIAAAAHAAYAAAABAAAAAAAHAAcAAAABAAAAAAAHAAgAAAABAAAAAAAIAAcAAAABAAAAAAAIAAgAAAABAAAAAAAIAAkAAAABAAAAAAAIAAoAAAABAAAAAAAHAAoAAAABAAAAAAAHAAkAAAABAAAAAAAGAAoAAAAAAAIAAAAFAAoAAAAAAAIAAAAFAAkAAAAAAAIAAAAFAAgAAAABAAAAAAAFAAcAAAABAAAAAAAFAAYAAAAAAAIAAAAFAAUAAAAAAAIAAAAGAAcAAAAAAAIAAAAGAAgAAAABAAAAAAAGAAkAAAAAAAIAAAAGAAQAAAAAAAIAAAAGAAMAAAAAAAIAAAAGAAIAAAAAAAIAAAAGAAEAAAAAAAIAAAAFAAEAAAAAAAIAAAAFAAIAAAAAAAIAAAAFAAMAAAAAAAIAAAAFAAQAAAAAAAIAAAAEAAkAAAAAAAIAAAAEAAoAAAAAAAIAAAAEAAgAAAABAAAAAAAEAAcAAAABAAAAAAAEAAYAAAABAAAAAAAEAAUAAAABAAAAAAAEAAQAAAABAAAAAAAEAAMAAAABAAAAAAAEAAIAAAABAAAAAAAEAAEAAAABAAAAAAAAAAwAAAAAAAAAAAABAAwAAAAAAAEAAAACAAwAAAABAAAAAAADAAwAAAABAAAAAAAEAAwAAAABAAAAAAAFAAwAAAABAAAAAAAGAAwAAAABAAAAAAAHAAwAAAABAAAAAAAIAAwAAAABAAAAAAAJAAwAAAAAAAEAAAAKAAwAAAAAAAAAAAALAAwAAAAAAAAAAAALAA0AAAAAAAAAAAAKAA0AAAAAAAAAAAAJAA0AAAAAAAEAAAAIAA0AAAABAAAAAAAHAA0AAAABAAAAAAAGAA0AAAABAAAAAAAFAA0AAAABAAAAAAAEAA0AAAABAAAAAAADAA0AAAABAAAAAAACAA0AAAABAAAAAAABAA0AAAAAAAEAAAAAAA0AAAAAAAAAAAA=")
tile_set = SubResource("TileSet_jyhfs")

[node name="Station" type="Area2D" parent="."]
position = Vector2(-35, 39)
metadata/_edit_group_ = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="Station"]
z_index = 1
shape = SubResource("RectangleShape2D_jyhfs")

[node name="Sprite2D" type="Sprite2D" parent="Station"]
texture = ExtResource("4_jyhfs")

[node name="ShadowRail" type="Line2D" parent="."]
visible = false
script = ExtResource("5_tipki")

[node name="ShadowTimer" type="Timer" parent="ShadowRail"]
autostart = true

[node name="Rail" type="Line2D" parent="."]
modulate = Color(0, 1, 1, 1)
self_modulate = Color(1, 1, 0, 1)
material = SubResource("ShaderMaterial_ya4ey")
width = 5.0
default_color = Color(1, 0, 1, 1)
gradient = SubResource("Gradient_choun")
texture = SubResource("GradientTexture2D_eb6dy")
texture_mode = 2
joint_mode = 1
script = ExtResource("6_ya4ey")

[node name="RailAnimationTimer" type="Timer" parent="Rail"]
wait_time = 0.5

[node name="Timer" type="Timer" parent="."]
wait_time = 0.05
autostart = true

[node name="FogOfWar" type="TileMapLayer" parent="."]
tile_map_data = PackedByteArray("AAAEAAQAAAAAAAEAAAAEAAAAAAAAAAEAAAAEAAEAAAAAAAEAAAAEAAIAAAAAAAEAAAAEAAMAAAAAAAEAAAAEAAUAAAAAAAEAAAAEAAYAAAAAAAEAAAAEAAcAAAAAAAEAAAAEAAgAAAAAAAEAAAAEAAkAAAAAAAEAAAAEAAoAAAAAAAEAAAAEAAsAAAAAAAEAAAAFAAsAAAAAAAEAAAAGAAsAAAAAAAEAAAAHAAsAAAAAAAEAAAAIAAsAAAAAAAEAAAAJAAsAAAAAAAEAAAAKAAsAAAAAAAEAAAALAAsAAAAAAAEAAAALAAoAAAAAAAEAAAALAAkAAAAAAAEAAAALAAgAAAAAAAEAAAALAAcAAAAAAAEAAAALAAYAAAAAAAEAAAALAAUAAAAAAAEAAAALAAQAAAAAAAEAAAALAAMAAAAAAAEAAAALAAIAAAAAAAEAAAALAAEAAAAAAAEAAAALAAAAAAAAAAEAAAAKAAAAAAAAAAEAAAAKAAEAAAAAAAEAAAAKAAIAAAAAAAEAAAAKAAMAAAAAAAEAAAAJAAMAAAAAAAEAAAAJAAQAAAAAAAEAAAAJAAUAAAAAAAEAAAAJAAYAAAAAAAEAAAAJAAcAAAAAAAEAAAAJAAgAAAAAAAEAAAAKAAgAAAAAAAEAAAAKAAkAAAAAAAEAAAAKAAoAAAAAAAEAAAAKAAcAAAAAAAEAAAAKAAYAAAAAAAEAAAAKAAUAAAAAAAEAAAAKAAQAAAAAAAEAAAAJAAIAAAAAAAEAAAAJAAEAAAAAAAEAAAAJAAAAAAAAAAEAAAAJAAkAAAAAAAEAAAAJAAoAAAAAAAEAAAAIAAoAAAAAAAEAAAAIAAkAAAAAAAEAAAAIAAgAAAAAAAEAAAAIAAcAAAAAAAEAAAAIAAYAAAAAAAEAAAAIAAUAAAAAAAEAAAAIAAQAAAAAAAEAAAAIAAMAAAAAAAEAAAAIAAIAAAAAAAEAAAAIAAEAAAAAAAEAAAAIAAAAAAAAAAEAAAAHAAAAAAAAAAEAAAAHAAEAAAAAAAEAAAAHAAIAAAAAAAEAAAAHAAMAAAAAAAEAAAAHAAQAAAAAAAEAAAAHAAUAAAAAAAEAAAAHAAYAAAAAAAEAAAAHAAcAAAAAAAEAAAAHAAgAAAAAAAEAAAAHAAkAAAAAAAEAAAAHAAoAAAAAAAEAAAAGAAoAAAAAAAEAAAAGAAkAAAAAAAEAAAAGAAgAAAAAAAEAAAAGAAcAAAAAAAEAAAAGAAYAAAAAAAEAAAAGAAUAAAAAAAEAAAAFAAUAAAAAAAEAAAAFAAQAAAAAAAEAAAAFAAMAAAAAAAEAAAAFAAIAAAAAAAEAAAAFAAEAAAAAAAEAAAAFAAAAAAAAAAEAAAAGAAAAAAAAAAEAAAAGAAEAAAAAAAEAAAAGAAIAAAAAAAEAAAAGAAMAAAAAAAEAAAAGAAQAAAAAAAEAAAAFAAgAAAAAAAEAAAAFAAkAAAAAAAEAAAAFAAoAAAAAAAEAAAAFAAcAAAAAAAEAAAAFAAYAAAAAAAEAAAALAAwAAAAAAAEAAAAKAAwAAAAAAAEAAAAJAAwAAAAAAAEAAAAIAAwAAAAAAAEAAAAHAAwAAAAAAAEAAAAGAAwAAAAAAAEAAAAFAAwAAAAAAAEAAAAEAAwAAAAAAAEAAAAEAA0AAAAAAAEAAAAFAA0AAAAAAAEAAAAGAA0AAAAAAAEAAAAHAA0AAAAAAAEAAAAIAA0AAAAAAAEAAAAJAA0AAAAAAAEAAAAKAA0AAAAAAAEAAAALAA0AAAAAAAEAAAADAA0AAAAAAAAAAAADAAwAAAAAAAAAAAADAAsAAAAAAAAAAAADAAoAAAAAAAAAAAADAAkAAAAAAAAAAAADAAgAAAAAAAAAAAADAAAAAAAAAAAAAAADAAEAAAAAAAAAAAADAAIAAAAAAAAAAAADAAMAAAAAAAAAAAADAAQAAAAAAAAAAAADAAUAAAAAAAAAAAADAAYAAAAAAAAAAAADAAcAAAAAAAAAAAACAAAAAAAAAAAAAAACAAEAAAAAAAAAAAACAAIAAAAAAAAAAAACAAMAAAAAAAAAAAACAAQAAAAAAAAAAAACAAUAAAAAAAAAAAACAAYAAAAAAAAAAAACAAcAAAAAAAAAAAACAAgAAAAAAAAAAAACAAkAAAAAAAAAAAACAAoAAAAAAAAAAAACAAsAAAAAAAAAAAACAAwAAAAAAAAAAAACAA0AAAAAAAAAAAABAA0AAAAAAAAAAAABAAwAAAAAAAAAAAABAAsAAAAAAAAAAAABAAoAAAAAAAAAAAABAAkAAAAAAAAAAAABAAgAAAAAAAAAAAABAAcAAAAAAAAAAAABAAYAAAAAAAAAAAABAAUAAAAAAAAAAAABAAQAAAAAAAAAAAABAAMAAAAAAAAAAAABAAIAAAAAAAAAAAABAAEAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAoAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAA0AAAAAAAAAAAA=")
tile_set = SubResource("TileSet_o6xl0")

[node name="LastRailPoint" type="Area2D" parent="."]
position = Vector2(-35, 8)
metadata/_edit_group_ = true

[node name="LRPCollider" type="CollisionShape2D" parent="LastRailPoint"]
shape = SubResource("CircleShape2D_tbgi4")

[node name="HUD" parent="." instance=ExtResource("6_tefeu")]

[node name="CameraParent" parent="." instance=ExtResource("7_o6xl0")]
position = Vector2(384, 424)

[connection signal="game_won" from="." to="HUD" method="_on_main_game_won"]
[connection signal="track_started" from="." to="HUD" method="_on_main_track_started"]
[connection signal="update_selected_feature" from="." to="HUD" method="_on_main_update_selected_feature"]
[connection signal="child_entered_tree" from="TileMapLayer" to="." method="_on_tile_map_layer_child_entered_tree"]
[connection signal="input_event" from="Station" to="." method="_on_station_input_event"]
[connection signal="timeout" from="ShadowRail/ShadowTimer" to="ShadowRail" method="_on_timer_timeout"]
[connection signal="timeout" from="Rail/RailAnimationTimer" to="Rail" method="_on_rail_animation_timer_timeout"]
[connection signal="timeout" from="Timer" to="." method="_on_timer_timeout"]
[connection signal="input_event" from="LastRailPoint" to="." method="_on_last_rail_point_input_event"]
[connection signal="buy_surveyor" from="HUD" to="." method="_on_hud_buy_surveyor"]
[connection signal="place_first_track" from="HUD" to="." method="_on_hud_place_first_track"]
