[gd_scene load_steps=26 format=4 uid="uid://dmrt6t2vmajwi"]

[ext_resource type="Script" uid="uid://drywyyj1nxdb3" path="res://scenes/main.gd" id="1_o5qli"]
[ext_resource type="Texture2D" uid="uid://co3vjucx0h4og" path="res://scenes/tilemap2.png" id="2_0wfyh"]
[ext_resource type="PackedScene" uid="uid://b3x524f6m4i62" path="res://scenes/unit/unit.tscn" id="2_tbgi4"]
[ext_resource type="Texture2D" uid="uid://ccamo22oq2aty" path="res://station.png" id="4_jyhfs"]
[ext_resource type="Script" uid="uid://dhu4ntwfbha75" path="res://scenes/tile_map_layer.gd" id="5_a8y0u"]
[ext_resource type="Texture2D" uid="uid://dtrnfiyyelqab" path="res://scenes/fogofwar.png" id="5_tbgi4"]
[ext_resource type="Script" uid="uid://c4wn7f84g47w6" path="res://scenes/shadow_rail.gd" id="5_tipki"]
[ext_resource type="Shader" uid="uid://chjt1pt14yblo" path="res://scenes/rail.gdshader" id="6_choun"]
[ext_resource type="Script" uid="uid://gg8l6pgy4uxr" path="res://scenes/train.gd" id="6_jbj1t"]
[ext_resource type="Script" uid="uid://ca2i1qu87p07y" path="res://scenes/station.gd" id="6_muem4"]
[ext_resource type="PackedScene" uid="uid://bhbchgqecjgxk" path="res://hud.tscn" id="6_tefeu"]
[ext_resource type="Script" uid="uid://bn8y2ks4mymdt" path="res://scenes/rail.gd" id="6_ya4ey"]
[ext_resource type="PackedScene" uid="uid://c3t7sd8evr40" path="res://scenes/settlement.tscn" id="7_jbj1t"]
[ext_resource type="Texture2D" uid="uid://cyk4q137quf7m" path="res://train.png" id="7_muem4"]
[ext_resource type="PackedScene" uid="uid://1k7r008g2o71" path="res://camera_parent.tscn" id="7_o6xl0"]
[ext_resource type="Resource" uid="uid://4kwt8jlgpj2h" path="res://scenes/dialogue/narrator.dialogue" id="8_muem4"]
[ext_resource type="PackedScene" uid="uid://dinc8uu5ax87a" path="res://scenes/dialogue/balloon.tscn" id="11_ya4ey"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_sugp2"]
texture = ExtResource("2_0wfyh")
texture_region_size = Vector2i(64, 64)
0:0/0 = 0
0:0/0/custom_data_0 = "water"
1:0/0 = 0
1:0/0/custom_data_0 = "grass"
0:1/0 = 0
0:1/0/custom_data_0 = "coast"
0:2/0 = 0
0:2/0/custom_data_0 = "mountain"
1:1/0 = 0
1:1/0/custom_data_0 = "forest"
1:2/0 = 0
1:2/0/custom_data_0 = "grass"
1:2/0/custom_data_1 = "hostile"

[sub_resource type="TileSet" id="TileSet_jyhfs"]
tile_size = Vector2i(64, 64)
custom_data_layer_0/name = "name"
custom_data_layer_0/type = 4
custom_data_layer_1/name = "status"
custom_data_layer_1/type = 4
sources/0 = SubResource("TileSetAtlasSource_sugp2")

[sub_resource type="RectangleShape2D" id="RectangleShape2D_jyhfs"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_ya4ey"]
shader = ExtResource("6_choun")
shader_parameter/progress = 0.0

[sub_resource type="CircleShape2D" id="CircleShape2D_dp3eg"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_tefeu"]
texture = ExtResource("5_tbgi4")
texture_region_size = Vector2i(64, 64)
0:0/0 = 0
0:1/0 = 0
0:1/0/custom_data_0 = true

[sub_resource type="TileSet" id="TileSet_o6xl0"]
tile_size = Vector2i(64, 64)
custom_data_layer_0/name = "isFog"
custom_data_layer_0/type = 1
sources/0 = SubResource("TileSetAtlasSource_tefeu")

[sub_resource type="CircleShape2D" id="CircleShape2D_tbgi4"]

[node name="Main" type="Node"]
script = ExtResource("1_o5qli")
unit_scene = ExtResource("2_tbgi4")

[node name="ExampleBalloon" parent="." instance=ExtResource("11_ya4ey")]
visible = false

[node name="TileMapLayer" type="TileMapLayer" parent="." node_paths=PackedStringArray("main", "fogOfWar") groups=["MainMap"]]
tile_map_data = PackedByteArray("AAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAoAAAAAAAAAAAABAAkAAAAAAAAAAAABAAgAAAAAAAAAAAABAAcAAAAAAAAAAAABAAYAAAAAAAAAAAABAAIAAAAAAAAAAAABAAEAAAAAAAAAAAABAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAKAAEAAAAAAAAAAAAKAAIAAAABAAEAAAAKAAMAAAABAAEAAAAKAAQAAAABAAAAAAAKAAUAAAABAAAAAAAKAAYAAAABAAAAAAAKAAcAAAABAAAAAAAKAAgAAAAAAAIAAAAKAAkAAAAAAAIAAAAKAAoAAAAAAAIAAAAJAAAAAAAAAAAAAAAJAAEAAAABAAAAAAAJAAIAAAABAAEAAAAJAAMAAAABAAAAAAAJAAQAAAABAAAAAAAJAAUAAAABAAAAAAALAAAAAAAAAAIAAAALAAEAAAAAAAAAAAALAAIAAAAAAAIAAAALAAMAAAABAAEAAAALAAQAAAABAAAAAAALAAUAAAABAAAAAAALAAYAAAAAAAIAAAALAAcAAAAAAAIAAAALAAgAAAAAAAIAAAALAAkAAAAAAAIAAAALAAoAAAAAAAIAAAABAAoAAAAAAAEAAAACAAoAAAAAAAEAAAACAAkAAAAAAAEAAAACAAgAAAAAAAEAAAACAAcAAAAAAAEAAAACAAYAAAAAAAEAAAACAAUAAAAAAAEAAAABAAUAAAAAAAEAAAABAAQAAAAAAAEAAAABAAMAAAAAAAEAAAACAAMAAAAAAAEAAAACAAIAAAAAAAEAAAACAAEAAAAAAAEAAAACAAAAAAAAAAEAAAAIAAAAAAAAAAAAAAAIAAEAAAABAAAAAAAIAAIAAAABAAAAAAAIAAMAAAABAAAAAAAIAAQAAAABAAAAAAAIAAUAAAABAAAAAAAIAAYAAAABAAAAAAAJAAYAAAABAAAAAAAJAAcAAAABAAAAAAAJAAgAAAABAAAAAAAJAAkAAAABAAIAAAAJAAoAAAAAAAIAAAADAAoAAAABAAAAAAADAAkAAAABAAAAAAADAAgAAAABAAAAAAADAAcAAAABAAAAAAADAAYAAAABAAAAAAADAAUAAAABAAAAAAADAAQAAAABAAAAAAACAAQAAAABAAAAAAADAAIAAAABAAEAAAADAAMAAAABAAEAAAADAAEAAAABAAIAAAADAAAAAAABAAIAAAAEAAAAAAABAAIAAAAFAAAAAAAAAAIAAAAGAAAAAAABAAEAAAAHAAAAAAABAAEAAAAHAAEAAAABAAAAAAAHAAIAAAAAAAIAAAAHAAMAAAAAAAIAAAAHAAQAAAAAAAAAAAAHAAUAAAAAAAAAAAAGAAUAAAAAAAIAAAAGAAYAAAAAAAIAAAAHAAYAAAAAAAAAAAAHAAcAAAABAAEAAAAHAAgAAAABAAEAAAAIAAcAAAABAAAAAAAIAAgAAAABAAAAAAAIAAkAAAABAAIAAAAIAAoAAAABAAIAAAAHAAoAAAABAAIAAAAHAAkAAAABAAEAAAAGAAoAAAAAAAIAAAAFAAoAAAAAAAIAAAAFAAkAAAAAAAIAAAAFAAgAAAABAAEAAAAFAAcAAAABAAEAAAAFAAYAAAAAAAIAAAAFAAUAAAAAAAIAAAAGAAcAAAAAAAIAAAAGAAgAAAABAAEAAAAGAAkAAAAAAAIAAAAGAAQAAAAAAAAAAAAGAAMAAAAAAAAAAAAGAAIAAAABAAEAAAAGAAEAAAABAAEAAAAFAAEAAAAAAAIAAAAFAAIAAAAAAAIAAAAFAAMAAAAAAAIAAAAFAAQAAAAAAAIAAAAEAAkAAAAAAAIAAAAEAAoAAAAAAAIAAAAEAAgAAAABAAAAAAAEAAcAAAABAAAAAAAEAAYAAAABAAAAAAAEAAUAAAABAAAAAAAEAAQAAAABAAEAAAAEAAMAAAABAAEAAAAEAAIAAAABAAIAAAAEAAEAAAABAAIAAAAAAAgAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAYAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAEAAAAAAAAAAAAQAAIAAAAAAAAAAAAQAAMAAAAAAAAAAAAQAAQAAAAAAAAAAAAQAAUAAAAAAAAAAAAQAAYAAAAAAAAAAAAQAAcAAAAAAAAAAAAQAAgAAAAAAAAAAAAQAAkAAAAAAAAAAAAQAAoAAAAAAAAAAAAQAAsAAAAAAAAAAAAPAAsAAAAAAAAAAAAPAAoAAAAAAAAAAAAPAAQAAAAAAAAAAAAPAAMAAAAAAAAAAAAPAAIAAAAAAAAAAAAPAAEAAAAAAAAAAAAPAAAAAAAAAAAAAAAOAAAAAAAAAAEAAAAOAAEAAAAAAAEAAAAOAAIAAAAAAAAAAAAOAAMAAAAAAAEAAAAOAAQAAAAAAAEAAAAOAAUAAAAAAAEAAAAPAAUAAAAAAAEAAAAPAAYAAAAAAAEAAAAPAAcAAAAAAAEAAAAPAAgAAAAAAAEAAAAPAAkAAAAAAAEAAAAOAAkAAAAAAAEAAAAOAAoAAAAAAAEAAAAOAAsAAAAAAAEAAAANAAsAAAAAAAIAAAAMAAsAAAAAAAIAAAALAAsAAAAAAAIAAAAKAAsAAAAAAAIAAAAJAAsAAAAAAAIAAAAIAAsAAAAAAAIAAAAHAAsAAAAAAAIAAAAGAAsAAAAAAAIAAAAFAAsAAAAAAAIAAAAEAAsAAAAAAAIAAAADAAsAAAAAAAIAAAACAAsAAAAAAAIAAAABAAsAAAAAAAEAAAAAAAsAAAAAAAAAAAAMAAEAAAAAAAAAAAAMAAIAAAAAAAAAAAANAAIAAAAAAAAAAAANAAAAAAABAAIAAAANAAEAAAABAAIAAAAMAAAAAAABAAIAAAANAAMAAAABAAAAAAAMAAMAAAABAAAAAAAMAAQAAAABAAAAAAAMAAUAAAABAAAAAAANAAUAAAABAAAAAAANAAQAAAABAAAAAAANAAYAAAABAAAAAAANAAcAAAABAAEAAAANAAgAAAABAAEAAAAMAAcAAAABAAEAAAAMAAYAAAABAAEAAAAMAAgAAAABAAEAAAAMAAkAAAABAAEAAAAMAAoAAAABAAEAAAANAAkAAAABAAEAAAANAAoAAAABAAEAAAAOAAcAAAABAAAAAAAOAAYAAAABAAAAAAAOAAgAAAABAAEAAAA=")
tile_set = SubResource("TileSet_jyhfs")
script = ExtResource("5_a8y0u")
main = NodePath("..")
fogOfWar = NodePath("../FogOfWar")

[node name="Station" type="Area2D" parent="."]
position = Vector2(-35, 39)
script = ExtResource("6_muem4")
metadata/_edit_group_ = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="Station"]
shape = SubResource("RectangleShape2D_jyhfs")

[node name="Sprite2D" type="Sprite2D" parent="Station"]
texture = ExtResource("4_jyhfs")

[node name="Homestead" parent="." instance=ExtResource("7_jbj1t")]
position = Vector2(480, 96)
dialogueFile = ExtResource("8_muem4")
settlementName = "Homestead"
dialogueFileSection = "homestead"

[node name="ShadowRail" type="Line2D" parent="."]
visible = false
script = ExtResource("5_tipki")

[node name="ShadowTimer" type="Timer" parent="ShadowRail"]
wait_time = 0.2
autostart = true

[node name="Rail" type="Line2D" parent="."]
material = SubResource("ShaderMaterial_ya4ey")
width = 5.0
texture_mode = 2
joint_mode = 1
script = ExtResource("6_ya4ey")

[node name="RailAnimationTimer" type="Timer" parent="Rail"]
wait_time = 0.5

[node name="Train" type="Area2D" parent="." node_paths=PackedStringArray("Station", "Rail", "main")]
position = Vector2(-34, -23)
script = ExtResource("6_jbj1t")
Station = NodePath("../Station")
Rail = NodePath("../Rail")
main = NodePath("..")
metadata/_edit_group_ = true

[node name="Sprite2D" type="Sprite2D" parent="Train"]
scale = Vector2(0.5, 0.5)
texture = ExtResource("7_muem4")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Train"]
shape = SubResource("CircleShape2D_dp3eg")

[node name="MoneyTimer" type="Timer" parent="."]
wait_time = 0.05
autostart = true

[node name="FogOfWar" type="TileMapLayer" parent="."]
tile_map_data = PackedByteArray("AAAEAAQAAAAAAAEAAAAEAAAAAAAAAAEAAAAEAAEAAAAAAAEAAAAEAAIAAAAAAAEAAAAEAAMAAAAAAAEAAAAEAAUAAAAAAAEAAAAEAAYAAAAAAAEAAAAEAAcAAAAAAAEAAAAEAAgAAAAAAAEAAAAEAAkAAAAAAAEAAAAEAAoAAAAAAAEAAAALAAoAAAAAAAEAAAALAAkAAAAAAAEAAAALAAgAAAAAAAEAAAALAAcAAAAAAAEAAAALAAYAAAAAAAEAAAALAAUAAAAAAAEAAAALAAQAAAAAAAEAAAALAAMAAAAAAAEAAAALAAIAAAAAAAEAAAALAAEAAAAAAAEAAAALAAAAAAAAAAEAAAAKAAAAAAAAAAEAAAAKAAEAAAAAAAEAAAAKAAIAAAAAAAEAAAAKAAMAAAAAAAEAAAAJAAMAAAAAAAEAAAAJAAQAAAAAAAEAAAAJAAUAAAAAAAEAAAAJAAYAAAAAAAEAAAAJAAcAAAAAAAEAAAAJAAgAAAAAAAEAAAAKAAgAAAAAAAEAAAAKAAkAAAAAAAEAAAAKAAoAAAAAAAEAAAAKAAcAAAAAAAEAAAAKAAYAAAAAAAEAAAAKAAUAAAAAAAEAAAAKAAQAAAAAAAEAAAAJAAIAAAAAAAEAAAAJAAEAAAAAAAEAAAAJAAAAAAAAAAEAAAAJAAkAAAAAAAEAAAAJAAoAAAAAAAEAAAAIAAoAAAAAAAEAAAAIAAkAAAAAAAEAAAAIAAgAAAAAAAEAAAAIAAcAAAAAAAEAAAAIAAYAAAAAAAEAAAAIAAUAAAAAAAEAAAAIAAQAAAAAAAEAAAAIAAMAAAAAAAEAAAAIAAIAAAAAAAEAAAAIAAEAAAAAAAEAAAAIAAAAAAAAAAEAAAAHAAAAAAAAAAEAAAAHAAEAAAAAAAEAAAAHAAIAAAAAAAEAAAAHAAMAAAAAAAEAAAAHAAQAAAAAAAEAAAAHAAUAAAAAAAEAAAAHAAYAAAAAAAEAAAAHAAcAAAAAAAEAAAAHAAgAAAAAAAEAAAAHAAkAAAAAAAEAAAAHAAoAAAAAAAEAAAAGAAoAAAAAAAEAAAAGAAkAAAAAAAEAAAAGAAgAAAAAAAEAAAAGAAcAAAAAAAEAAAAGAAYAAAAAAAEAAAAGAAUAAAAAAAEAAAAFAAUAAAAAAAEAAAAFAAQAAAAAAAEAAAAFAAMAAAAAAAEAAAAFAAIAAAAAAAEAAAAFAAEAAAAAAAEAAAAFAAAAAAAAAAEAAAAGAAAAAAAAAAEAAAAGAAEAAAAAAAEAAAAGAAIAAAAAAAEAAAAGAAMAAAAAAAEAAAAGAAQAAAAAAAEAAAAFAAgAAAAAAAEAAAAFAAkAAAAAAAEAAAAFAAoAAAAAAAEAAAAFAAcAAAAAAAEAAAAFAAYAAAAAAAEAAAADAA0AAAAAAAAAAAADAAoAAAAAAAAAAAADAAkAAAAAAAAAAAADAAgAAAAAAAAAAAADAAAAAAAAAAAAAAADAAEAAAAAAAAAAAADAAIAAAAAAAAAAAADAAMAAAAAAAAAAAADAAQAAAAAAAAAAAADAAUAAAAAAAAAAAADAAYAAAAAAAAAAAADAAcAAAAAAAAAAAACAAAAAAAAAAAAAAACAAEAAAAAAAAAAAACAAIAAAAAAAAAAAACAAMAAAAAAAAAAAACAAQAAAAAAAAAAAACAAUAAAAAAAAAAAACAAYAAAAAAAAAAAACAAcAAAAAAAAAAAACAAgAAAAAAAAAAAACAAkAAAAAAAAAAAACAAoAAAAAAAAAAAACAA0AAAAAAAAAAAABAA0AAAAAAAAAAAABAAkAAAAAAAAAAAABAAgAAAAAAAAAAAABAAcAAAAAAAAAAAABAAYAAAAAAAAAAAABAAUAAAAAAAAAAAABAAQAAAAAAAAAAAABAAMAAAAAAAAAAAABAAIAAAAAAAAAAAABAAEAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAA0AAAAAAAAAAAD//wkAAAAAAAAAAAAQAAAAAAAAAAEAAAAPAAAAAAAAAAEAAAAPAAEAAAAAAAEAAAAOAAEAAAAAAAEAAAAOAAAAAAAAAAEAAAANAAAAAAAAAAEAAAAMAAAAAAAAAAEAAAAMAAEAAAAAAAEAAAANAAEAAAAAAAEAAAAQAAEAAAAAAAEAAAAQAAIAAAAAAAEAAAAQAAMAAAAAAAEAAAAQAAQAAAAAAAEAAAAQAAUAAAAAAAEAAAAQAAYAAAAAAAEAAAAQAAcAAAAAAAEAAAAQAAgAAAAAAAEAAAAQAAkAAAAAAAEAAAAQAAoAAAAAAAEAAAAQAAsAAAAAAAEAAAAPAAsAAAAAAAEAAAAOAAsAAAAAAAEAAAANAAsAAAAAAAEAAAAMAAsAAAAAAAEAAAALAAsAAAAAAAEAAAAKAAsAAAAAAAEAAAAJAAsAAAAAAAEAAAAIAAsAAAAAAAEAAAAHAAsAAAAAAAEAAAAGAAsAAAAAAAEAAAAFAAsAAAAAAAEAAAAEAAsAAAAAAAEAAAAMAAoAAAAAAAEAAAAMAAkAAAAAAAEAAAANAAoAAAAAAAEAAAAOAAoAAAAAAAEAAAAPAAoAAAAAAAEAAAAPAAkAAAAAAAEAAAAOAAkAAAAAAAEAAAANAAkAAAAAAAEAAAANAAgAAAAAAAEAAAAMAAgAAAAAAAEAAAAOAAgAAAAAAAEAAAAPAAgAAAAAAAEAAAAPAAcAAAAAAAEAAAAPAAYAAAAAAAEAAAAPAAUAAAAAAAEAAAAPAAQAAAAAAAEAAAAPAAMAAAAAAAEAAAAPAAIAAAAAAAEAAAAOAAIAAAAAAAEAAAAOAAMAAAAAAAEAAAAOAAQAAAAAAAEAAAAOAAUAAAAAAAEAAAAOAAYAAAAAAAEAAAAOAAcAAAAAAAEAAAANAAcAAAAAAAEAAAANAAYAAAAAAAEAAAANAAUAAAAAAAEAAAANAAQAAAAAAAEAAAANAAMAAAAAAAEAAAANAAIAAAAAAAEAAAAMAAIAAAAAAAEAAAAMAAMAAAAAAAEAAAAMAAQAAAAAAAEAAAAMAAUAAAAAAAEAAAAMAAYAAAAAAAEAAAAMAAcAAAAAAAEAAAA=")
tile_set = SubResource("TileSet_o6xl0")

[node name="LastRailPoint" type="Area2D" parent="."]
position = Vector2(-35, 5)
metadata/_edit_group_ = true

[node name="LRPCollider" type="CollisionShape2D" parent="LastRailPoint"]
shape = SubResource("CircleShape2D_tbgi4")

[node name="HUD" parent="." instance=ExtResource("6_tefeu")]

[node name="CameraParent" parent="." instance=ExtResource("7_o6xl0")]
anchor_mode = 0

[node name="Settlement" parent="." instance=ExtResource("7_jbj1t")]
position = Vector2(162, 287)
dialogueFile = ExtResource("8_muem4")
settlementName = "Capital"

[connection signal="track_started" from="." to="Train" method="_on_main_track_started"]
[connection signal="track_started" from="." to="HUD" method="_on_main_track_started"]
[connection signal="child_entered_tree" from="TileMapLayer" to="." method="_on_tile_map_layer_child_entered_tree"]
[connection signal="input_event" from="Station" to="." method="_on_station_input_event"]
[connection signal="timeout" from="ShadowRail/ShadowTimer" to="ShadowRail" method="_on_timer_timeout"]
[connection signal="timeout" from="Rail/RailAnimationTimer" to="Rail" method="_on_rail_animation_timer_timeout"]
[connection signal="timeout" from="MoneyTimer" to="." method="_on_timer_timeout"]
[connection signal="input_event" from="LastRailPoint" to="." method="_on_last_rail_point_input_event"]
[connection signal="buy_tunnelling" from="HUD" to="." method="_on_hud_buy_tunnelling"]
[connection signal="place_first_track" from="HUD" to="." method="_on_hud_place_first_track"]
